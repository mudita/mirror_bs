ifndef MK_SIGNATURE_MK
MK_SIGNATURE_MK=		TRUE

INCLUDER_MODULES_LIST=		config \
				platform \
				name \
				path \
				unit_test_sources

ifndef INCLUDER_PATH
$(error tool modbuild is not installed in your build system!)
else
include $(INCLUDER_PATH)
endif

SIGNATURE_VERSION_SWITCH=	-dumpversion
SIGNATURE_ARCHITECTURE_SWITCH=	-dumpmachine

SIGNATURE_VERSION_COMMAND=	$(PLATFORM_C_COMPILER) \
					$(SIGNATURE_VERSION_SWITCH) | \
				tr \
					\. \
					_

SIGNATURE_ARCHITECTURE_COMMAND=	$(PLATFORM_C_COMPILER) \
					$(SIGNATURE_ARCHITECTURE_SWITCH) | \
				tr \
					- \
					_

SIGNATURE_COMPILER_VERSION=	$(shell \
					$(SIGNATURE_VERSION_COMMAND))

SIGNATURE_TARGET_ARCHITECTURE=	$(shell \
					$(SIGNATURE_ARCHITECTURE_COMMAND))

SIGNATURE_HOST_VERSION_COMMAND=		$(PLATFORM_HOST_C_COMPILER) \
						$(SIGNATURE_VERSION_SWITCH)

SIGNATURE_HOST_ARCHITECTURE_COMMAND=	$(PLATFORM_HOST_C_COMPILER) \
						$(SIGNATURE_ARCHITECTURE_SWITCH)

SIGNATURE_HOST_COMPILER_VERSION=	$(shell \
						$(SIGNATURE_HOST_VERSION_COMMAND))

SIGNATURE_HOST_TARGET_ARCHITECTURE=	$(shell \
						$(SIGNATURE_HOST_ARCHITECTURE_COMMAND))

SIGNATURE_COMPILER_COMMAND=	echo \
					$(PLATFORM_C_COMPILER) | \
				tr \
					- \
					_

SIGNATURE_COMPILER=		$(shell \
					$(SIGNATURE_COMPILER_COMMAND))

SIGNATURE_SUFFIX=		$(SIGNATURE_COMPILER)_$(SIGNATURE_COMPILER_VERSION)_$(SIGNATURE_TARGET_ARCHITECTURE)
SIGNATURE_HOST_SUFFIX=		$(PLATFORM_HOST_C_COMPILER)_$(SIGNATURE_HOST_COMPILER_VERSION)_$(SIGNATURE_HOST_TARGET_ARCHITECTURE)

SIGNATURE_ASM_OBJECT_SUFFIX=	$(SIGNATURE_SUFFIX).$(CONFIG_ASM_OBJECT_FILE_EXT)

SIGNATURE_C_OBJECT_SUFFIX=	$(SIGNATURE_SUFFIX).$(CONFIG_C_OBJECT_FILE_EXT)

SIGNATURE_CPP_OBJECT_SUFFIX=	$(SIGNATURE_SUFFIX).$(CONFIG_CPP_OBJECT_FILE_EXT)

SIGNATURE_APPLICATION_SUFFIX=		$(SIGNATURE_SUFFIX)
SIGNATURE_APPLICATION_TEST_SUFFIX=	$(UNIT_TEST_SOURCES_C_SUFFIX)_$(SIGNATURE_SUFFIX)

SIGNATURE_APPLICATION_FILE_NAME=	$(NAME)_$(SIGNATURE_APPLICATION_SUFFIX)
SIGNATURE_APPLICATION_TEST_FILE_NAME=	$(NAME)_$(SIGNATURE_APPLICATION_TEST_SUFFIX)

SIGNATURE_MODULE_FILE_NAME=	$(CONFIG_LIB_PREFIX)$(SIGNATURE_APPLICATION_FILE_NAME).$(CONFIG_STATIC_LIBRARY_EXT)

SIGNATURE_TOOL_FILE_NAME=	$(NAME)

endif

